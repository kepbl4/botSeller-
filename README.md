# XTR Bot

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π Telegram-–±–æ—Ç –Ω–∞ –±–∞–∑—ñ aiogram 3 –¥–ª—è –ø—Ä–æ–¥–∞–∂—É —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –≥–∞–π–¥—É –∑–∞ Telegram Stars –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Redis/SQL.

## –ó–∞–ø—É—Å–∫

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
   ```bash
   pip install -r requirements.txt
   ```
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–ø—Ä–∏–∫–ª–∞–¥ `.env`):
   ```env
   BOT_TOKEN=...
   ADMIN_IDS=7390743758
   ALERT_CHAT_IDS=7390743758
   GUIDE_MODE=url
   GUIDE_URL=https://...
   SALES_ENABLED=true
   PAYLOAD=guide_500
   PRICE_UAH=299
   OLD_PRICE_UAH=699
   UAH_PER_STAR=0.55
   TON_PER_STAR=0.0015
   TON_WALLET=UQB...
   ALLOW_SYSTEMD=false
   SERVICE_NAME=xtrbot.service
   ```
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
   ```bash
   python app.py
   ```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

- `data/access.json` ‚Äî –¥–æ—Å—Ç—É–ø–∏ –¥–æ –≥–∞–π–¥—É.
- `data/purchases.jsonl` ‚Äî —ñ—Å—Ç–æ—Ä—ñ—è —É—Å–ø—ñ—à–Ω–∏—Ö –æ–ø–ª–∞—Ç.
- `data/orders.jsonl` ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω—ñ —ñ–Ω–≤–æ–π—Å–∏.
- `data/ledger.jsonl` ‚Äî —Ä—É—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (–≤–∫–ª—é—á–Ω–æ –∑ refund).
- `data/users.json` ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ –º–µ—Ç—Ä–∏–∫–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó.
- `data/alerts.json` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–æ–∑—Å–∏–ª–æ–∫.
- `logs/app.log` ‚Äî –æ–±–µ—Ä—Ç–æ–≤–∏–π –ª–æ–≥ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

## –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–£ –∫–∞—Ç–∞–ª–æ–∑—ñ `assets/` –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ –¥–≤—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó –¥–ª—è –º–µ–Ω—é:

- `assets/main.jpg` ‚Äî —Ç–∏—Ç—É–ª—å–Ω–∏–π –µ–∫—Ä–∞–Ω —ñ–∑ –∫–Ω–æ–ø–∫–∞–º–∏ –∫—É–ø—ñ–≤–ª—ñ —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –¥–∞–ª—ñ.
- `assets/faq.jpg` ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ –Ω–∞ –ø–æ—à–∏—Ä–µ–Ω—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è.

–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –∂–æ–¥–Ω–∏—Ö –±—ñ–Ω–∞—Ä–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤: –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±–æ—Ç –ø—ñ–¥—Ç—è–≥—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∏. –©–æ–π–Ω–æ –≤–∏ –¥–æ–¥–∞—Å—Ç–µ –≤–ª–∞—Å–Ω—ñ JPG-—Ñ–∞–π–ª–∏ –≤ –ø–∞–ø–∫—É `assets/`, –≤–æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—á–Ω—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–º—ñ–Ω —É –∫–æ–¥—ñ. –î–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥—É –≤ git –ø—Ä–∏—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª `.gitkeep`.

–§–∞–π–ª–∏ –≤–µ—Ä—Å—ñ–æ–Ω—É—é—Ç—å—Å—è —è–∫ –±—ñ–Ω–∞—Ä–Ω—ñ (–¥–∏–≤. `.gitattributes`), —Ç–æ–º—É –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –∑–∞–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö —Å–≤–æ—ó–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º. –Ø–∫—â–æ –≤–∏ –æ–Ω–æ–≤–∏–ª–∏ –≥—Ä–∞—Ñ—ñ–∫—É, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–ª–∞–¥—ñ—Ç—å –Ω–æ–≤—ñ —Ñ–∞–π–ª–∏ –∑ —Ç–∞–∫–∏–º–∏ –∂ –Ω–∞–∑–≤–∞–º–∏ ‚Äî –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ö–æ–ø–∏—Ç—å —ó—Ö –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–º—ñ–Ω.

## –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å –∫–Ω–æ–ø–∫—É ¬´–ö–µ—Ä—É–≤–∞–Ω–Ω—è ü§ñ¬ª —É –≥–æ–ª–æ–≤–Ω–æ–º—É –º–µ–Ω—é, —â–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

- **–ñ—É—Ä–Ω–∞–ª–∏** ‚Äî –±–∞–ª–∞–Ω—Å —É –∑—ñ—Ä–∫–∞—Ö/TON, –æ—Å—Ç–∞–Ω–Ω—ñ –ø–ª–∞—Ç–µ–∂—ñ –∑ –ø—Ä–∏—á–∏–Ω–∞–º–∏ –≤—ñ–¥–º–æ–≤, —ñ–Ω–≤–æ–π—Å–∏, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, —Å–∏—Å—Ç–µ–º–Ω—ñ –ª–æ–≥–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–æ–∑—Å–∏–ª–æ–∫.
- **–î—ñ—ó** ‚Äî –∑–º—ñ–Ω–∞ —Ü—ñ–Ω–∏ (–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–∫–æ–º –∑—ñ—Ä–æ–∫), –æ–Ω–æ–≤–ª–µ–Ω–Ω—è GUIDE_URL, —Ä—É—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –±–∞–ª–∞–Ω—Å–æ–º (—Å–ø–∏—Å–∞–Ω–Ω—è, –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, –∫–æ—Ä–µ–∫—Ü—ñ—ó) —Ç–∞ –∑–∞–ø—É—Å–∫ refund –∑–∞ charge_id.
- **–¢–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è** ‚Äî –º–∏—Ç—Ç—î–≤–µ –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –ø—Ä–æ–¥–∞–∂—ñ–≤.
- **–†–æ–∑—Å–∏–ª–∫–∞** ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —ñ–∑ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º –¥–æ—Å—Ç–∞–≤–æ–∫/–ø–æ–º–∏–ª–æ–∫.
- **ü§ñ –°–∏—Å—Ç–µ–º–∞** ‚Äî –ø–∞—É–∑–∞/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–¥–∞–∂—ñ–≤, –æ–ø—Ü—ñ–π–Ω–∏–π restart —Å–µ—Ä–≤—ñ—Å—É —á–µ—Ä–µ–∑ systemd.
- **‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –º–µ–Ω—é** ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –ø–µ—Ä—à–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –±–µ–∑ –∑–º—ñ–Ω–∏ –∫–æ–¥—É.

–£—Å—ñ –∑–º—ñ–Ω–∏ (—Ü—ñ–Ω–∞, URL, —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∂—ñ–≤, –Ω–æ–≤—ñ –∞–¥–º—ñ–Ω–∏) –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª–∞—Ö `data/settings.json` —ñ `data/admins.json`, —Ç–æ–º—É –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç—å —Ä–µ—Å—Ç–∞—Ä—Ç–∏.
